# QUIZ

Приложение QUIZ представляет собой API сервиса для получения и хранения вопросов для викторины.

Сервис позволяет:
- Получать новые вопросы с сервиса https://jservice.io;
- добавлять указанное количество вопросов в базу данных.

В качестве базы данных используется реляционная база данных PostgreSQL.
Для взаимодействия с базой данных используется ORM SQLAlchemy.
Логика приложения построена на основе стандарта REST API.
Для документирования API используется сервис Swagger.
Для тестирования методов может быть использовано приложение Postman или сервис Swagger.


## Локальный запуск приложения

На вашем компьютере должен быть установлен doker и docker-compose.

1. Скачайте приложение.
2. Перейдите в директорию quiz_api.
3. При первом запуске необходимо ввести команду `docker-compose up --build`. При повторном запуске достаточно ввести
`docker-compose up`.


## Описание методов
### /questions

1. GET - позволяет получить все данные из таблицы questions:  
    Для использования метода необходимо:
   
    В Postman, использовать  GET запрос http:host:5000/api/questions.  
    В качестве ответа вы получите JSON: 
    ```
    {
       "message": "В базе данных нет ни одного вопроса."
    }
    ``` 
    
    если в таблице questions нет вопросов. 
    ```
    [
       {
           "created_at": "2022-12-30T18:38:15.667000",
           "id": 10,
           "answer": "Smokey the Bear(\\'s motto)",
           "question_text": "\"Only you can prevent forest fires\"",
           "question_id": 1543
       },
       {
           "created_at": "2022-12-30T20:52:26.860000",
           "id": 11,
           "answer": "Henry the Sixth",
           "question_text": "(Spoiler alert) the reason there's no this king \"Part 4\" is he gets killed near the end of \"Part 3\"",
           "question_id": 162040
       },
    ]
    ```
    если в таблице questions есть вопросы.

2. POST - позволяет добавить новые вопросы в таблицу questions:  
Для использования метода необходимо: 

    В Postman, использовать  POST запрос http:host:5000/api/questions. 

    В теле запроса прописать JSON вида 
    ```
    {
        "questions_num": 2
    } 
    ```
    В качестве ответа при первом запросе, когда в таблице users нет данных, вы получите пустой JSON: 
    ```
    {}
    ```
    при этом в базу данных будет добавлено указанное вами количество вопросов. 

    При повторном и последующих запросах в качестве ответа вы получите последний вопрос добавленный вами в предыдущем 
    запросе. Это будет JSON вида:
    ```
    {
    "created_at": "2022-12-30T20:52:26.860000",
    "id": 11,
    "answer": "Henry the Sixth",
    "question_text": "(Spoiler alert) the reason there's no this king \"Part 4\" is he gets killed near the end of \"Part 3\"",
    "question_id": 162040
    }
    ```
     
    В таблицу questions будут добавлены 'id', 'question_id', 'question_text', 'answer' и 'created_at' вопросов. 
    В базу будет добавлено то количество вопросов которое было указано в запросе, при этом ,если ресурс 
    https://jservice.io выдаст вопрос, который уже есть в базе то данный вопрос не будет добавлен, а приложение сделает
    новый запрос на получение дополнительного вопроса.


3. DELETE - позволяет удалить всех пользователей из таблицы users: 

    Для использования метода необходимо: 

    В Postman, использовать  DELETE запрос http:host:5000/api/user. 

    В качестве ответа вы получите JSON: 
    ```
    {
        "message": "Все вопросы удалены из базы данных."
    }
    ```
   
Все вышеописанные методы можно использовать с помощью сервиса Swagger. Для этого при запущенном приложении необходимо
перейти по ссылке http://localhost:5000/apidocs/.
